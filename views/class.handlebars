<section>
  <h2>{{cls.title}}</h2>
  <p><strong>Major:</strong> {{cls.major}}</p>
  <p>{{cls.description}}</p>
  <p><strong>Prereqs:</strong> {{#if cls.prereqs}}{{cls.prereqs}}{{else}}None{{/if}}</p>
  <p><strong>Location:</strong> {{cls.location}}</p>

  <h3>Professors & Ratings</h3>
  <div id="professor-list">
    <p>Loading professor ratings...</p>
  </div>
</section>

<script>
  (async () => {
    const response = await fetch(`/api/class/{{cls._id}}/professors`);
    const data = await response.json();
    const container = document.getElementById("professor-list");

    if (!data.professors || data.professors.length === 0) {
      container.innerHTML = "<p>No professor data found.</p>";
      return;
    }

    container.innerHTML = `
      <ul>
        ${data.professors.map(p => `
          <li>
            <strong>${p.firstName} ${p.lastName}</strong> â€” ${p.department}<br>
            Rating: ${p.rating ?? "N/A"}<br>
            Difficulty: ${p.difficulty ?? "N/A"}<br>
            Would take again: ${p.wouldTakeAgain ?? "N/A"}%<br>
            <a href="${p.rmpLink}" target="_blank">View on RateMyProfessors</a>
          </li>
        `).join("")}
      </ul>
    `;
  })();
</script>
